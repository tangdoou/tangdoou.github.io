# 新手博客维护指南（Hugo + Paper 主题）

> 适用仓库：`tangdoou.github.io`  
> 适合人群：第一次维护 Hugo 博客、第一次用 GitHub Pages 部署的同学。

---

## 1. 你这个博客的整体结构（先建立地图）

先理解最核心目录：

- `hugo.toml`：**全站配置中心**（站点标题、头像、菜单、社交链接、分页、代码高亮等）。
- `content/`：**正文内容**。
  - `content/posts/`：博客文章都在这里。
  - `content/about.md`：关于页面。
  - `content/archives.md`：归档页面。
  - `content/search.md`：搜索页面。
- `static/`：**静态资源源文件**（图片、图标等）。
  - `static/images/touxiang.png`：你本地头像图（可替换）。
- `layouts/`：自定义模板、局部覆盖。
  - `layouts/partials/head.html`：网页 `<head>` 的扩展位置。
  - `layouts/shortcodes/rawhtml.html`：允许在 Markdown 中插入原始 HTML 的 shortcode。
- `.github/workflows/deploy.yml`：**自动部署到 GitHub Pages** 的工作流。
- `themes/paper/`：Paper 主题（以 git submodule 方式引入）。
- `public/`：Hugo 生成的静态站点输出目录（通常由 `hugo` 命令构建生成）。

---

## 2. 日常发新博客（最常用流程）

### 2.1 创建新文章

在仓库根目录执行：

```bash
hugo new content/posts/你的文章名.md
```

例如：

```bash
hugo new content/posts/rl-policy-gradient-notes.md
```

> 这会根据 `archetypes/default.md` 自动生成文章模板，默认 `draft = true`。

### 2.2 编辑文章 Front Matter（头信息）

建议至少设置这些字段：

```yaml
---
title: "文章标题"
date: 2026-02-09T10:00:00+08:00
draft: false
tags: ["强化学习", "笔记"]
categories: ["技术笔记"]
summary: "一句话摘要（可选）"
---
```

关键说明：

- `draft: false` 才会发布到线上。
- `tags` / `categories` 会自动生成标签页和分类页。
- 文件名建议使用英文、数字、连字符，避免空格与中文路径（可读性和兼容性更好）。

### 2.3 写正文

直接写 Markdown 即可：

- 标题：`##`、`###`
- 代码块：三反引号 + 语言名
- 数学公式：已启用（`hugo.toml` 中 `math = true`）

行内公式：

```markdown
$\alpha + \beta$
```

块公式：

```markdown
$$
\nabla_\theta J(\theta)
$$
```

### 2.4 本地预览

```bash
hugo server -D
```

- 浏览器访问 `http://localhost:1313`
- `-D` 会显示草稿文章（`draft: true`）

### 2.5 提交并发布

```bash
git add .
git commit -m "feat: add new post xxx"
git push
```

推送到 `main` 分支后，GitHub Actions 会自动构建并发布到 Pages。

---

## 3. 站点常见维护项（配置级）

## 3.1 修改站点标题 / 简介 / 名字

编辑 `hugo.toml`：

- `title`：浏览器标题、站点名
- `[params].name`：主页展示名字
- `[params].bio`：主页简介

## 3.2 修改头像（你特别关心）

有两种方式：

### 方式 A：本地头像（推荐，稳定）

1. 准备头像文件，例如 `touxiang.png`
2. 放到 `static/images/touxiang.png`
3. 在 `hugo.toml` 中改：

```toml
[params]
  avatar = "/images/touxiang.png"
```

优点：不依赖外链，不怕图床失效。

### 方式 B：外链头像

直接在 `avatar` 填完整 URL。

风险：图床失效、跨域策略、加载慢都会导致头像显示异常。

## 3.3 修改顶部导航菜单

编辑 `hugo.toml` 的 `[menu]`：

- `name`：菜单显示文本
- `url`：目标路径
- `weight`：排序，越小越靠前

例如新增“搜索”：

```toml
[[menu.main]]
  identifier = "search"
  name = "搜索"
  url = "/search/"
  weight = 40
```

## 3.4 修改社交链接

编辑 `hugo.toml` 的 `[params]`：

- `github`
- `twitter`
- `email`
- `steam`
- `wechat`

留空或删除字段即可关闭对应展示。

## 3.5 代码高亮与主题

`hugo.toml -> [markup.highlight]` 已配置：

- `lineNos = true`：启用行号
- `lineNumbersInTable = false`：行号不用 table 渲染，避免样式问题
- `style = "dracula"`：代码主题

如果你想改主题，可替换 `style`（如 `monokai`、`github` 等）。

## 3.6 数学公式

当前已开启：

- `params.math = true`
- `goldmark passthrough` 的 `$...$` 和 `$$...$$`

一般不用再改，直接在文章里写即可。

---

## 4. 图片与附件怎么管理

### 推荐做法

- 通用图片放 `static/images/...`
- 文章专属图片建议按文章分目录：
  - `static/images/posts/文章slug/1.png`

Markdown 引用：

```markdown
![示意图](/images/posts/rl-policy-gradient-notes/overview.png)
```

优点：路径清晰、迁移方便、不会因为相对路径搞错图。

---

## 5. 部署原理与排障（很重要）

## 5.1 自动部署原理

1. 你 push 到 `main`
2. `.github/workflows/deploy.yml` 触发
3. Action 安装 Hugo 并执行 `hugo --minify`
4. 上传 `public/` 作为 Pages artifact
5. 发布到 GitHub Pages

## 5.2 如果页面没更新，按这个顺序查

1. GitHub 仓库的 **Actions** 是否绿色成功。
2. 文章是否 `draft: false`。
3. 文件是否真的 push 到 `main`。
4. `baseURL` 是否正确（`https://你的用户名.github.io/`）。
5. 浏览器是否缓存（强刷 Ctrl/Cmd+Shift+R）。

## 5.3 常见错误

- **菜单点了 404**：`url` 配错。
- **头像不显示**：外链失效或路径不是 `/images/...`。
- **中文路径乱码或难分享**：文件名建议 slug 化。
- **本地能看线上没有**：你本地用了 `-D` 预览草稿，但线上不发布草稿。

---

## 6. 新手推荐的“标准发文清单”（每次照着做）

每次发文前后按清单走：

- [ ] 新建文章后把 `draft` 改成 `false`
- [ ] 填写 `title/date/tags/categories`
- [ ] 检查 Markdown 标题层级是否合理
- [ ] 所有图片都能显示（路径正确）
- [ ] 本地 `hugo server -D` 看一遍
- [ ] 提交前看 `git status`，避免把临时文件提交上去
- [ ] push 后看 Actions 是否成功

---

## 7. 进阶维护建议（提升长期可维护性）

1. **统一 Front Matter 风格**（建议全 YAML 或全 TOML，不混用）。
2. **减少外链依赖**（头像/关键图片尽量本地化）。
3. **给重要页面加校验**（about、archives、search、tags、rss）。
4. **定期更新主题 submodule**：

```bash
git submodule update --remote --merge
```

5. **为文档写“变更日志”**（每次改配置都留痕）。

---

## 8. 快速命令手册（复制就能用）

```bash
# 1) 启动本地预览（含草稿）
hugo server -D

# 2) 新建文章
hugo new content/posts/xxx.md

# 3) 生成发布文件
hugo --minify

# 4) 查看当前改动
git status

# 5) 提交并推送
git add .
git commit -m "feat: add post xxx"
git push
```

---

如果你愿意，我下一步还可以给你再补一份：

- 「**文章模板库**」：读书笔记模板 / 技术教程模板 / 周报模板 / 论文精读模板。
- 「**故障速查表**」：把常见报错和对应修复命令做成一页速查卡。
